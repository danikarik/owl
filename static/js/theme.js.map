{"version":3,"file":"theme.js.map","sources":["../../../js/mrare/background-images.js","../../../js/mrare/prism.js","../../../js/mrare/smooth-scroll.js","../../../js/mrare/sticky.js","../../../js/mrare/util.js","../../../js/mrare/video.js","../../../js/mrare/wizard.js","../../../js/mrare/index.js"],"sourcesContent":["//\n//\n// background-images.js\n//\n// a javascript fallback for CSS 'object-fit' property for browsers that don't support it\n\nimport jQuery from 'jquery';\n\n(($) => {\n  if ('objectFit' in document.documentElement.style === false) {\n    $('.bg-image').each(function attachBg() {\n      const img = $(this);\n      const src = img.attr('src');\n      const classes = img.get(0).classList;\n      // Replaces the default <img.bg-image> element with a <div.bg-image>\n      // to attach background using legacy friendly CSS rules\n      img.before($(`<div class=\"${classes}\" style=\"background: url(${src}); background-size: cover; background-position: 50% 50%;\"></div>`));\n      // Removes original <img.bg-image> as it is no longer required\n      img.remove();\n    });\n  }\n})(jQuery);\n","//\n//\n// prism.js\n//\n// Initialises the prism code highlighting plugin\n\nimport Prism from 'prismjs';\n\nPrism.highlightAll();\n","//\n//\n// smooth-scroll.js\n//\n// Initialises the prism code highlighting plugin\n\nimport $ from 'jquery';\nimport SmoothScroll from 'smooth-scroll';\n\nconst mrSmoothScroll = new SmoothScroll('a[data-smooth-scroll]', {\n  offset: $('body').attr('data-smooth-scroll-offset') || 0,\n});\n\nexport default mrSmoothScroll;\n","//\n//\n// sticky.js\n//\n// Initialises the srollMonitor plugin and provides interface to watcher objects\n// for sticking elements to the top of viewport while scrolling\n\nimport jQuery from 'jquery';\nimport scrollMonitor from 'scrollmonitor';\n\nconst mrSticky = (($) => {\n  /**\n   * Check for scrollMonitor dependency\n   * scrollMonitor - https://github.com/stutrek/scrollMonitor\n   */\n  if (typeof scrollMonitor === 'undefined') {\n    throw new Error('mrSticky requires scrollMonitor.js (https://github.com/stutrek/scrollMonitor)');\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'mrSticky';\n  const VERSION = '1.2.0';\n  const DATA_KEY = 'mr.sticky';\n  const EVENT_KEY = `.${DATA_KEY}`;\n  const DATA_API_KEY = '.data-api';\n  const JQUERY_NO_CONFLICT = $.fn[NAME];\n  const NO_OFFSET = 0;\n\n  const ClassName = {\n    FIXED_TOP: 'position-fixed',\n    ABSOLUTE_BOTTOM: 'sticky-bottom',\n    FIXED_BOTTOM: 'sticky-viewport-bottom',\n    SCROLLED: 'scrolled',\n  };\n\n  const Css = {\n    HEIGHT: 'min-height',\n    WIDTH: 'max-width',\n    SPACE_TOP: 'top',\n    SPACE_BOTTOM: 'bottom',\n  };\n\n  const Event = {\n    LOAD_DATA_API: `load${EVENT_KEY}${DATA_API_KEY}`,\n    WINDOW_RESIZE: 'resize',\n    ALERT_CLOSED: 'closed.bs.alert',\n  };\n\n  const Options = {\n    BELOW_NAV: 'below-nav',\n    TOP: 'top',\n    BOTTOM: 'bottom',\n  };\n\n  const Selector = {\n    DATA_ATTR: 'sticky',\n    DATA_STICKY: '[data-sticky]',\n    NAV_STICKY: 'body > div.navbar-container [data-sticky=\"top\"]',\n    ALERT: '.alert-dismissible',\n  };\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Sticky {\n    constructor(element) {\n      const $element = $(element);\n      const stickyData = $element.data(Selector.DATA_ATTR);\n      const stickyUntil = $element.closest('section') || null;\n      this.element = element;\n      this.stickBelowNav = stickyData === Options.BELOW_NAV;\n      this.stickBottom = stickyData === Options.BOTTOM;\n      this.stickyUntil = stickyUntil;\n      this.updateNavProperties();\n      this.isNavElement = $element.is(this.navElement);\n      this.initWatcher($element);\n      this.updateCss();\n      this.setResizeEvent();\n      // Run a calculation immediately to show sticky elements if page starts\n      // at a half-scrolled position\n      this.onWatcherChange($element);\n      this.ticking = false; // for debouncing resize event with RequestAnimationFrame\n    }\n\n    // getters\n\n    static get VERSION() {\n      return VERSION;\n    }\n\n    initWatcher(element) {\n      const $element = $(element);\n      const notNavElement = !this.isNavElement;\n\n      let offset = this.stickBelowNav\n        && this.navIsSticky\n        && notNavElement\n        ? { top: this.navHeight } : NO_OFFSET;\n\n      offset = this.stickBottom\n        && notNavElement\n        ? { bottom: -$element.outerHeight } : offset;\n\n      const watcher = scrollMonitor.create(element, offset);\n      // ensure that we're always watching the place the element originally was\n      watcher.lock();\n\n      const untilWatcher = this.stickyUntil !== null ? scrollMonitor.create(\n        this.stickyUntil,\n        { bottom: -(watcher.height + offset.top) },\n      ) : null;\n\n\n      this.watcher = watcher;\n      this.untilWatcher = untilWatcher;\n      this.navHeight = this.navHeight;\n\n      // For navs that start at top, stick them immediately to avoid a jump\n      if (this.isNavElement && watcher.top === 0 && !this.navIsAbsolute) {\n        $element.addClass(ClassName.FIXED_TOP);\n      }\n\n      watcher.stateChange(() => { this.onWatcherChange($element); });\n\n      if (untilWatcher !== null) {\n        untilWatcher.exitViewport(() => {\n          // If the element is in a section, it will scroll up with the section\n          $element.addClass(ClassName.ABSOLUTE_BOTTOM);\n        });\n\n        untilWatcher.enterViewport(() => {\n          $element.removeClass(ClassName.ABSOLUTE_BOTTOM);\n        });\n      }\n    }\n\n    onWatcherChange($element) {\n      // Add fixed when element leaves via top of viewport or if nav is sitting at top\n      $element.toggleClass(\n        ClassName.FIXED_TOP,\n        this.watcher.isAboveViewport\n        || (!this.navIsAbsolute && !this.stickBottom\n          && (this.isNavElement && this.watcher.top === 0)),\n      );\n\n      // Used to apply styles to the nav based on \"scrolled\" class\n      // independedly of position-fixed because that class is used for more practical reasons\n      // such as avoiding a jump on first scroll etc.\n      $element.toggleClass(\n        ClassName.SCROLLED,\n        this.watcher.isAboveViewport\n          && this.isNavElement\n          && !this.stickBottom,\n      );\n\n      // Fix to bottom when element enters via bottom of viewport and has data-sticky=\"bottom\"\n      $element.toggleClass(\n        ClassName.FIXED_BOTTOM,\n        (this.watcher.isFullyInViewport || this.watcher.isAboveViewport) && this.stickBottom,\n      );\n\n      if (!this.stickBottom) {\n        $element.css(\n          Css.SPACE_TOP,\n          this.watcher.isAboveViewport\n          && this.navIsSticky\n          && this.stickBelowNav\n            ? this.navHeight : NO_OFFSET,\n        );\n      }\n    }\n\n    setResizeEvent() {\n      // Closing any alerts above the nav will mean we need to recalculate position.\n      $(Selector.ALERT).on(Event.ALERT_CLOSED, () => {\n        this.onResize();\n      });\n\n      $(window).on(Event.WINDOW_RESIZE, () => {\n        this.onResize();\n      });\n    }\n\n    onResize() {\n      if (!this.ticking) {\n        window.requestAnimationFrame(() => {\n          this.updateCss();\n          if (this.isNavElement) {\n            this.watcher.unlock();\n            this.watcher.recalculateLocation();\n            this.watcher.lock();\n          }\n          this.ticking = false;\n        });\n        this.ticking = true;\n      }\n    }\n\n    updateCss() {\n      const $element = $(this.element);\n\n      // Fix width by getting parent's width to avoid element spilling out when pos-fixed\n      $element.css(Css.WIDTH, $element.parent().width());\n\n      this.updateNavProperties();\n\n      const elemHeight = $element.outerHeight();\n      const notNavElement = !this.isNavElement;\n\n      // Set a min-height to prevent \"jumping\" when sticking to top\n      // but not applied to the nav element itself unless it is overlay (absolute) nav\n      if ((!this.navIsAbsolute && this.isNavElement) || notNavElement) {\n        $element.parent().css(Css.HEIGHT, elemHeight);\n      }\n\n      if (this.navIsSticky && notNavElement) {\n        $element.css(Css.HEIGHT, elemHeight);\n      }\n    }\n\n    updateNavProperties() {\n      const $navElement = this.navElement || $(Selector.NAV_STICKY).first();\n      this.navElement = $navElement;\n      this.navHeight = $navElement.outerHeight();\n      this.navIsAbsolute = $navElement.css('position') === 'absolute';\n      this.navIsSticky = $navElement.length > 0;\n    }\n\n    static jQueryInterface() {\n      return this.each(function jqEachSticky() {\n        const $element = $(this);\n        let data = $element.data(DATA_KEY);\n        if (!data) {\n          data = new Sticky(this);\n          $element.data(DATA_KEY, data);\n        }\n      });\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * Initialise by data attribute\n   * ------------------------------------------------------------------------\n   */\n\n  $(window).on(Event.LOAD_DATA_API, () => {\n    const stickyElements = $.makeArray($(Selector.DATA_STICKY));\n\n    /* eslint-disable no-plusplus */\n    for (let i = stickyElements.length; i--;) {\n      const $sticky = $(stickyElements[i]);\n      Sticky.jQueryInterface.call($sticky, $sticky.data());\n    }\n  });\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n  /* eslint-disable no-param-reassign */\n  $.fn[NAME] = Sticky.jQueryInterface;\n  $.fn[NAME].Constructor = Sticky;\n  $.fn[NAME].noConflict = function StickyNoConflict() {\n    $.fn[NAME] = JQUERY_NO_CONFLICT;\n    return Sticky.jQueryInterface;\n  };\n  /* eslint-enable no-param-reassign */\n\n  return Sticky;\n})(jQuery);\n\nexport default mrSticky;\n","//\n//\n// Util\n//\n// Medium Rare utility functions\n// v1.0.0\n\nimport jQuery from 'jquery';\n\nconst mrUtil = (($) => {\n  // Activate tooltips\n  $('[data-toggle=\"tooltip\"]').tooltip();\n\n  // Activate toasts\n  $('.toast').toast();\n\n  const Util = {\n\n    activateIframeSrc(iframe) {\n      const $iframe = $(iframe);\n      if ($iframe.attr('data-src')) {\n        $iframe.attr('src', $iframe.attr('data-src'));\n      }\n    },\n\n    idleIframeSrc(iframe) {\n      const $iframe = $(iframe);\n      $iframe.attr('data-src', $iframe.attr('src')).attr('src', '');\n    },\n  };\n\n  return Util;\n})(jQuery);\n\nexport default mrUtil;\n","//\n//\n// smooth-scroll.js\n//\n// Initialises the prism code highlighting plugin\n\nimport $ from 'jquery';\nimport mrUtil from './util';\n\n$(document).ready(() => {\n  $('.video-cover .video-play-icon').on('click touchstart', function clickedPlay() {\n    const $iframe = $(this).closest('.video-cover').find('iframe');\n    mrUtil.activateIframeSrc($iframe);\n    $(this).parent('.video-cover').addClass('video-cover-playing');\n  });\n\n  // Disable video cover behaviour on mobile devices to avoid user having to press twice\n  const isTouchDevice = 'ontouchstart' in document.documentElement;\n  if (isTouchDevice === true) {\n    $('.video-cover').each(function activeateMobileIframes() {\n      $(this).addClass('video-cover-touch');\n      const $iframe = $(this).closest('.video-cover').find('iframe');\n      mrUtil.activateIframeSrc($iframe);\n    });\n  }\n\n  // <iframe> in modals\n  $('.modal').on('shown.bs.modal', function modalShown() {\n    const $modal = $(this);\n    if ($modal.find('iframe[data-src]').length) {\n      const $iframe = $modal.find('iframe[data-src]');\n      mrUtil.activateIframeSrc($iframe);\n    }\n  });\n\n  $('.modal').on('hidden.bs.modal', function modalHidden() {\n    const $modal = $(this);\n    if ($modal.find('iframe[src]').length) {\n      const $iframe = $modal.find('iframe[data-src]');\n      mrUtil.idleIframeSrc($iframe);\n    }\n  });\n\n  $('[data-toggle=\"tooltip\"]').tooltip();\n});\n","//\n//\n// wizard.js\n//\n// initialises the jQuery Smart Wizard plugin\n\nimport $ from 'jquery';\nimport 'smartwizard';\n\n$(document).ready(() => {\n  $('.wizard').smartWizard({\n    transitionEffect: 'fade',\n    showStepURLhash: false,\n    toolbarSettings: { toolbarPosition: 'none' },\n  });\n});\n","\nimport './background-images';\nimport './prism';\nimport mrSmoothScroll from './smooth-scroll';\nimport mrSticky from './sticky';\nimport mrUtil from './util';\nimport './video';\nimport './wizard';\n\n(() => {\n  if (typeof $ === 'undefined') {\n    throw new TypeError('Medium Rare JavaScript requires jQuery. jQuery must be included before theme.js.');\n  }\n})();\n\nexport {\n  mrSmoothScroll,\n  mrSticky,\n  mrUtil,\n};\n"],"names":["$","jQuery","document","documentElement","style","each","img","this","src","attr","classes","get","classList","before","remove","Prism","highlightAll","mrSmoothScroll","SmoothScroll","offset","mrSticky","scrollMonitor","Error","NAME","DATA_KEY","JQUERY_NO_CONFLICT","fn","ClassName","Css","Event","LOAD_DATA_API","WINDOW_RESIZE","ALERT_CLOSED","Options","Selector","Sticky","element","$element","stickyData","data","stickyUntil","closest","stickBelowNav","stickBottom","updateNavProperties","isNavElement","is","navElement","initWatcher","updateCss","setResizeEvent","onWatcherChange","ticking","notNavElement","navIsSticky","top","navHeight","bottom","outerHeight","watcher","create","lock","untilWatcher","height","navIsAbsolute","addClass","stateChange","_this","exitViewport","enterViewport","removeClass","toggleClass","isAboveViewport","isFullyInViewport","css","on","_this2","onResize","window","requestAnimationFrame","_this3","unlock","recalculateLocation","parent","width","elemHeight","$navElement","first","length","jQueryInterface","stickyElements","makeArray","i","$sticky","call","Constructor","noConflict","mrUtil","tooltip","toast","activateIframeSrc","iframe","$iframe","idleIframeSrc","ready","find","$modal","smartWizard","transitionEffect","showStepURLhash","toolbarSettings","toolbarPosition","TypeError"],"mappings":"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"}